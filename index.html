<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="monkeycmd - Master keyboard shortcuts with a MonkeyType-inspired typing trainer. Practice cursor navigation, word deletion, and text selection shortcuts.">
    <meta name="theme-color" content="#323437">
    <title>monkeycmd - Keyboard Shortcut Trainer</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <style>
        /* Critical blur - loads before external CSS */
        .hints-hidden {
            filter: blur(10px) !important;
            opacity: 0.15 !important;
            pointer-events: none !important;
        }
    </style>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body class="preload" data-hints="off">
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="logo" id="logoBtn" role="button" tabindex="0" aria-label="Reset game">
                <span class="logo-icon">&gt;_</span>
                <span class="logo-text">monkeycmd</span>
            </div>
            <div class="header-controls">
                <div class="os-selector" role="radiogroup" aria-label="Select operating system">
                    <button class="os-btn active" data-os="mac" aria-label="Mac shortcuts" data-tooltip="Mac shortcuts">
                        <img src="mac.svg" alt="Mac" class="os-icon" width="20" height="20">
                    </button>
                    <button class="os-btn" data-os="windows" aria-label="Windows shortcuts" data-tooltip="Windows shortcuts">
                        <img src="windows.svg" alt="Windows" class="os-icon" width="20" height="20">
                    </button>
                    <button class="os-btn" data-os="linux" aria-label="Linux shortcuts" data-tooltip="Linux shortcuts">
                        <img src="linux.svg" alt="Linux" class="os-icon" width="20" height="20">
                    </button>
                </div>
                <div class="theme-picker-wrapper">
                    <button class="btn btn-secondary theme-trigger" id="themeToggle" aria-label="Choose theme" aria-expanded="false" aria-haspopup="true" data-tooltip="Change color theme">
                        <span class="theme-icon">Dark</span>
                        <svg class="dropdown-arrow" width="10" height="6" viewBox="0 0 10 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M1 1l4 4 4-4"/>
                        </svg>
                    </button>
                    <div class="theme-dropdown" id="themeDropdown" role="menu" aria-label="Theme selection">
                        <button class="theme-option active" data-theme="default" role="menuitem">
                            <div class="theme-preview">
                                <span class="color-swatch" style="background: #323437;"></span>
                                <span class="color-swatch accent" style="background: #e2b714;"></span>
                            </div>
                            <span class="theme-name">Dark</span>
                            <span class="theme-check">&#10003;</span>
                        </button>
                        <button class="theme-option" data-theme="dracula" role="menuitem">
                            <div class="theme-preview">
                                <span class="color-swatch" style="background: #282a36;"></span>
                                <span class="color-swatch accent" style="background: #bd93f9;"></span>
                            </div>
                            <span class="theme-name">Dracula</span>
                            <span class="theme-check">&#10003;</span>
                        </button>
                        <button class="theme-option" data-theme="nord" role="menuitem">
                            <div class="theme-preview">
                                <span class="color-swatch" style="background: #2e3440;"></span>
                                <span class="color-swatch accent" style="background: #88c0d0;"></span>
                            </div>
                            <span class="theme-name">Nord</span>
                            <span class="theme-check">&#10003;</span>
                        </button>
                        <button class="theme-option" data-theme="matrix" role="menuitem">
                            <div class="theme-preview">
                                <span class="color-swatch" style="background: #0d0d0d;"></span>
                                <span class="color-swatch accent" style="background: #00ff00;"></span>
                            </div>
                            <span class="theme-name">Matrix</span>
                            <span class="theme-check">&#10003;</span>
                        </button>
                        <button class="theme-option" data-theme="solarized-light" role="menuitem">
                            <div class="theme-preview">
                                <span class="color-swatch" style="background: #fdf6e3;"></span>
                                <span class="color-swatch accent" style="background: #cb4b16;"></span>
                            </div>
                            <span class="theme-name">Solarized Light</span>
                            <span class="theme-check">&#10003;</span>
                        </button>
                        <button class="theme-option" data-theme="solarized-dark" role="menuitem">
                            <div class="theme-preview">
                                <span class="color-swatch" style="background: #002b36;"></span>
                                <span class="color-swatch accent" style="background: #268bd2;"></span>
                            </div>
                            <span class="theme-name">Solarized Dark</span>
                            <span class="theme-check">&#10003;</span>
                        </button>
                        <button class="theme-option" data-theme="monokai" role="menuitem">
                            <div class="theme-preview">
                                <span class="color-swatch" style="background: #272822;"></span>
                                <span class="color-swatch accent" style="background: #f92672;"></span>
                            </div>
                            <span class="theme-name">Monokai</span>
                            <span class="theme-check">&#10003;</span>
                        </button>
                        <button class="theme-option" data-theme="gruvbox" role="menuitem">
                            <div class="theme-preview">
                                <span class="color-swatch" style="background: #282828;"></span>
                                <span class="color-swatch accent" style="background: #fe8019;"></span>
                            </div>
                            <span class="theme-name">Gruvbox</span>
                            <span class="theme-check">&#10003;</span>
                        </button>
                        <button class="theme-option" data-theme="one-dark" role="menuitem">
                            <div class="theme-preview">
                                <span class="color-swatch" style="background: #282c34;"></span>
                                <span class="color-swatch accent" style="background: #61afef;"></span>
                            </div>
                            <span class="theme-name">One Dark</span>
                            <span class="theme-check">&#10003;</span>
                        </button>
                        <button class="theme-option" data-theme="tokyo-night" role="menuitem">
                            <div class="theme-preview">
                                <span class="color-swatch" style="background: #1a1b26;"></span>
                                <span class="color-swatch accent" style="background: #bb9af7;"></span>
                            </div>
                            <span class="theme-name">Tokyo Night</span>
                            <span class="theme-check">&#10003;</span>
                        </button>
                        <button class="theme-option" data-theme="catppuccin" role="menuitem">
                            <div class="theme-preview">
                                <span class="color-swatch" style="background: #1e1e2e;"></span>
                                <span class="color-swatch accent" style="background: #cba6f7;"></span>
                            </div>
                            <span class="theme-name">Catppuccin</span>
                            <span class="theme-check">&#10003;</span>
                        </button>
                        <button class="theme-option" data-theme="rose-pine" role="menuitem">
                            <div class="theme-preview">
                                <span class="color-swatch" style="background: #191724;"></span>
                                <span class="color-swatch accent" style="background: #ebbcba;"></span>
                            </div>
                            <span class="theme-name">Rose Pine</span>
                            <span class="theme-check">&#10003;</span>
                        </button>
                        <button class="theme-option" data-theme="synthwave" role="menuitem">
                            <div class="theme-preview">
                                <span class="color-swatch" style="background: #2b213a;"></span>
                                <span class="color-swatch accent" style="background: #ff7edb;"></span>
                            </div>
                            <span class="theme-name">Synthwave</span>
                            <span class="theme-check">&#10003;</span>
                        </button>
                        <button class="theme-option" data-theme="ocean" role="menuitem">
                            <div class="theme-preview">
                                <span class="color-swatch" style="background: #0a1929;"></span>
                                <span class="color-swatch accent" style="background: #00bcd4;"></span>
                            </div>
                            <span class="theme-name">Ocean</span>
                            <span class="theme-check">&#10003;</span>
                        </button>
                        <button class="theme-option" data-theme="forest" role="menuitem">
                            <div class="theme-preview">
                                <span class="color-swatch" style="background: #1a2417;"></span>
                                <span class="color-swatch accent" style="background: #8fbc8f;"></span>
                            </div>
                            <span class="theme-name">Forest</span>
                            <span class="theme-check">&#10003;</span>
                        </button>
                        <button class="theme-option" data-theme="sunset" role="menuitem">
                            <div class="theme-preview">
                                <span class="color-swatch" style="background: #2d1f31;"></span>
                                <span class="color-swatch accent" style="background: #ff6b35;"></span>
                            </div>
                            <span class="theme-name">Sunset</span>
                            <span class="theme-check">&#10003;</span>
                        </button>
                    </div>
                </div>
                <div class="settings-wrapper">
                    <button class="settings-trigger" id="settingsTrigger" aria-label="Settings" data-tooltip="Settings">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3"></circle>
                            <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"></path>
                        </svg>
                    </button>
                    <div class="settings-dropdown" id="settingsDropdown">
                        <div class="settings-title">Settings</div>
                        <label class="setting-item">
                            <span class="setting-label">Show hints</span>
                            <input type="checkbox" id="settingHints" class="setting-toggle">
                            <span class="toggle-slider"></span>
                        </label>
                        <div class="settings-section">
                            <div class="settings-section-title">command types</div>
                            <label class="setting-item">
                                <span class="setting-label">navigation</span>
                                <input type="checkbox" id="settingNavigation" class="setting-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                            <label class="setting-item">
                                <span class="setting-label">selection</span>
                                <input type="checkbox" id="settingSelection" class="setting-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                            <label class="setting-item">
                                <span class="setting-label">deletion</span>
                                <input type="checkbox" id="settingDeletion" class="setting-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Compact Stats Bar with Timer Controls -->
            <div class="stats-container compact">
                <div class="stat-item">
                    <span class="stat-value" id="cpmDisplay">0</span>
                    <span class="stat-label">CPM</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="accuracyDisplay">-</span>
                    <span class="stat-label">Accuracy</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value" id="timeDisplay">30</span>
                    <span class="stat-label">Time</span>
                </div>
                <div class="stat-item best-score-container" id="bestScoreContainer">
                    <span class="stat-value best-value" id="bestCpmDisplay">-</span>
                    <span class="stat-label">Best</span>
                    <span class="new-best-badge" id="newBestBadge">NEW!</span>
                </div>
                <div class="timer-controls">
                    <button class="timer-btn" data-time="15" data-tooltip="15 second session">15</button>
                    <button class="timer-btn active" data-time="30" data-tooltip="30 second session">30</button>
                    <button class="timer-btn" data-time="60" data-tooltip="60 second session">60</button>
                </div>
            </div>

            <!-- Terminal Container (Main Focus) -->
            <div class="terminal-container" id="terminalContainer">
                <div class="terminal-focus-glow"></div>
                <div class="terminal-header">
                    <span class="terminal-dot red"></span>
                    <span class="terminal-dot yellow"></span>
                    <span class="terminal-dot green"></span>
                    <span class="terminal-title">terminal</span>
                </div>
                <!-- Instruction Overlay -->
                <div class="instruction-overlay" id="instructionOverlay">
                    <span class="instruction-text" id="commandInstruction">Delete the word 'hello'</span>
                    <span class="instruction-arrow">→</span>
                    <span
                        class="instruction-keys hints-hidden"
                        id="keyHint"
                        style="filter: blur(10px) !important; opacity: 0.15 !important; pointer-events: none;"
                        aria-hidden="true"
                    >...</span>
                </div>
                <div class="terminal-content">
                    <div class="terminal-line">
                        <span class="terminal-prompt">$</span>
                        <div class="terminal-text" id="terminalArea" tabindex="0"></div>
                    </div>
                </div>
                <button class="replay-btn" id="replayBtn" aria-label="Restart" data-tooltip="Restart (Tab+Enter)">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M1 4v6h6"></path>
                        <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>
                    </svg>
                </button>
            </div>

            <!-- Status Message -->
            <div class="status-message text-center text-muted" id="statusMessage">
                Press any shortcut to start
            </div>

            <!-- Mobile Shortcut Keyboard -->
            <div class="mobile-keyboard" id="mobileKeyboard">
                <div class="mobile-keyboard-title">tap to execute shortcut</div>

                <!-- Navigation Section -->
                <div class="mobile-keyboard-section" data-section="navigation">
                    <div class="mobile-keyboard-section-title">navigation</div>
                    <div class="mobile-keyboard-row">
                        <button class="shortcut-key" data-category="navigation" data-command="MOVE_WORD_LEFT">
                            <span class="key-combo">Opt+Left</span>
                            <span class="key-label">word left</span>
                        </button>
                        <button class="shortcut-key" data-category="navigation" data-command="MOVE_WORD_RIGHT">
                            <span class="key-combo">Opt+Right</span>
                            <span class="key-label">word right</span>
                        </button>
                    </div>
                    <div class="mobile-keyboard-row">
                        <button class="shortcut-key" data-category="navigation" data-command="JUMP_LINE_START">
                            <span class="key-combo">Cmd+Left</span>
                            <span class="key-label">line start</span>
                        </button>
                        <button class="shortcut-key" data-category="navigation" data-command="JUMP_LINE_END">
                            <span class="key-combo">Cmd+Right</span>
                            <span class="key-label">line end</span>
                        </button>
                    </div>
                </div>

                <!-- Selection Section -->
                <div class="mobile-keyboard-section" data-section="selection">
                    <div class="mobile-keyboard-section-title">selection</div>
                    <div class="mobile-keyboard-row">
                        <button class="shortcut-key" data-category="selection" data-command="SELECT_WORD_LEFT">
                            <span class="key-combo">Opt+Shift+Left</span>
                            <span class="key-label">select word left</span>
                        </button>
                        <button class="shortcut-key" data-category="selection" data-command="SELECT_WORD_RIGHT">
                            <span class="key-combo">Opt+Shift+Right</span>
                            <span class="key-label">select word right</span>
                        </button>
                    </div>
                    <div class="mobile-keyboard-row">
                        <button class="shortcut-key" data-category="selection" data-command="SELECT_TO_LINE_START">
                            <span class="key-combo">Cmd+Shift+Left</span>
                            <span class="key-label">select to start</span>
                        </button>
                        <button class="shortcut-key" data-category="selection" data-command="SELECT_TO_LINE_END">
                            <span class="key-combo">Cmd+Shift+Right</span>
                            <span class="key-label">select to end</span>
                        </button>
                    </div>
                    <div class="mobile-keyboard-row">
                        <button class="shortcut-key" data-category="selection" data-command="SELECT_ALL">
                            <span class="key-combo">Cmd+A</span>
                            <span class="key-label">select all</span>
                        </button>
                    </div>
                </div>

                <!-- Deletion Section -->
                <div class="mobile-keyboard-section" data-section="deletion">
                    <div class="mobile-keyboard-section-title">deletion</div>
                    <div class="mobile-keyboard-row">
                        <button class="shortcut-key" data-category="deletion" data-command="DELETE_WORD">
                            <span class="key-combo">Opt+Delete</span>
                            <span class="key-label">delete word</span>
                        </button>
                        <button class="shortcut-key" data-category="deletion" data-command="DELETE_WORD_FORWARD">
                            <span class="key-combo">Fn+Opt+Delete</span>
                            <span class="key-label">delete word fwd</span>
                        </button>
                    </div>
                    <div class="mobile-keyboard-row">
                        <button class="shortcut-key" data-category="deletion" data-command="DELETE_TO_LINE_START">
                            <span class="key-combo">Cmd+Delete</span>
                            <span class="key-label">delete to start</span>
                        </button>
                        <button class="shortcut-key" data-category="deletion" data-command="DELETE_TO_LINE_END">
                            <span class="key-combo">Ctrl+K</span>
                            <span class="key-label">delete to end</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Inline Results Screen (MonkeyType-style) -->
            <div class="results-inline" id="resultsInline" hidden>
                <div class="results-hero">
                    <div class="result-main">
                        <span class="result-label">cpm</span>
                        <span class="result-number" id="resultCpmMain">0</span>
                    </div>
                    <div class="result-main">
                        <span class="result-label">acc</span>
                        <span class="result-number" id="resultAccMain">100%</span>
                    </div>
                    <div class="result-main">
                        <span class="result-label">time</span>
                        <span class="result-number" id="resultTimeMain">30s</span>
                    </div>
                </div>
                <div class="results-chart-container" id="resultsChart"></div>
                <div class="results-pb" id="resultsPb" hidden>
                    <span class="pb-text">new personal best!</span>
                </div>
                <div class="hints-warning" id="hintsWarning" hidden>
                    <span class="warning-icon">⚠️</span>
                    <span class="warning-text">hints enabled - score not counted</span>
                </div>
                <div class="results-footer">
                    <span class="result-info" id="resultInfo">30s - all commands</span>
                </div>
            </div>
        </main>

        <!-- Footer Hints -->
        <footer class="footer">
            <div class="keyboard-shortcuts-hint">
                <div class="shortcut-item" data-tooltip="Restart the current session">
                    <span class="key key-small">Tab</span>
                    <span class="key-plus">+</span>
                    <span class="key key-small">Enter</span>
                    <span class="shortcut-label">restart</span>
                </div>
                <div class="shortcut-divider"></div>
                <div class="shortcut-item" data-tooltip="Reset and go back to start">
                    <span class="key key-small">Esc</span>
                    <span class="shortcut-label">reset</span>
                </div>
            </div>
            <div class="footer-credit">
                made with love by <a href="https://x.com/deetschoening" target="_blank" rel="noopener noreferrer" class="credit-link">deet</a>
            </div>
        </footer>
    </div>

    <!-- Scripts -->
    <script type="module" src="js/main.js"></script>
</body>
</html>
